<div class="card card-table bg-light">
  <div class="card-header">
    <div class="row">
      <div class="col-md-5 mt-2">
        <h3>
          <i class="fa fa-user-circle"></i> Administrar Usuarios
          <i data-target="#modalAgregarUsr" data-toggle="modal" class="fa fa-plus-circle text-success mas" (click)="LimpiarAuxUsuario()"></i>
        </h3>
      </div>
      <div class="col-md-3 offset-4">
        <input type="text" class="form-control buscar" (keyup)="filtro($event)" placeholder="Buscar usuario">
      </div>
    </div>
  </div>
  <div class="card-body">
    <div>
      <eui-tabs  (tabClose)="cerrarTab($event)">
        <eui-tab-panel [title]="'Usuarios'">
          <eui-datagrid  [data]="usuarios" selectionMode="single" [(selection)]="usuarioSeleccionado" style="max-height:425px">
            <eui-grid-column  field="nombreUsuario" title="Nombre" align="center"></eui-grid-column>
            <eui-grid-column field="rutUsuario" title="Rut" align="center"></eui-grid-column>
            <eui-grid-column field="rutEmpresa" title="Rut de la Empresa" align="center"></eui-grid-column>
          </eui-datagrid>
          <br>
         
          <div class="pull-right">
            <button [disabled]="!usuarioSeleccionado.nombreUsuario.length > 0"  type="button" class="btn btn-outline-success" (click)="seleccionarUsuario(usuarioSeleccionado)">
              <i class="fas fa-eye"></i> Ver Usuario
            </button>
            <button  [disabled]="!usuarioSeleccionado.nombreUsuario.length > 0" type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#modalCambiarPass">
                <i class="fas fa-eye"></i> Cambiar Contraseña
           </button>
           <button [disabled]="!usuarioSeleccionado.nombreUsuario.length > 0"  type="button" class="btn btn-outline-danger">
              <i class="fas fa-trash"></i> Bloquear Usuario
            </button>
            <button [disabled]="!usuarioSeleccionado.nombreUsuario.length > 0"  type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#modalEliminarUsuario">
              <i class="fas fa-trash"></i> Eliminar Usuario
            </button>
          </div>
        </eui-tab-panel>
        
        <eui-tab-panel *ngIf="seleccionUsuario" [closable]="true" [title]="usuario.nombreUsuario">
          <div class="card card-table">
            <div class="card-header">
              <div class="row">
                <div class="col-md-1">
                  <label>Nombre</label>
                </div>
                <div class="col-md-2">
                  <label>: {{usuario.nombreUsuario}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-1">
                  <label>Rut</label>
                </div>
                <div class="col-md-2">
                  <label>: {{usuario.rutUsuario}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-1">
                  <label>Empresa</label>
                </div>
                <div class="col-md-2">
                  <label>: {{nomempresa.nombreEmpresa}}</label>
                </div>
              </div>
              <div class="col-md-4" style="position:relative;right:-685px" >
                  <button type="button" class="btn btn-outline-info" data-target="#modalEditarUsr" data-toggle="modal">
                      <i class="fas fa-edit"></i> Editar Usuario
                    </button>
                  </div>
            </div>
            <div class="card-body">
              <eui-tabs>
                <eui-tab-panel [title]="'Perfiles'">
                  <eui-datagrid [data]="perfiles" selectionMode="single" [(selection)]="perfilSeleccionado" style="max-height:425px">
                    <eui-grid-column field="nombrePerfil" title="Nombre" align="center"></eui-grid-column>
                  </eui-datagrid>
                  <br>
                  <div class="pull-right">
                    <button type="button" class="btn btn-outline-success" (click)="seleccionarPerfil(perfilSeleccionado)">
                      <i class="fas fa-eye"></i> Ver Perfil
                    </button>
                    <button type="button" class="btn btn-outline-info" data-target="#modal" data-toggle="modal" (click)="editarPerfil()">
                      <i class="fas fa-edit"></i> Editar Perfil
                    </button>
                    <button type="button" class="btn btn-outline-danger">
                      <i class="fas fa-trash"></i> Eliminar Perfil
                    </button>
                  </div>
                </eui-tab-panel>
                <eui-tab-panel [title]="'Actividades'">
                  <div class="row">
                    <div class="col-md-5 offset-1">
                      <div class="card card-table">
                        <div class="card-header text-center">
                          <h5>Último Inicio de sesión</h5>
                        </div>
                        <div class="card-body text-center">
                          <div class="espera">
                            <div class="row">
                              <div class="col-md-4">
                                <i style="font-size: 30px" class="fas fa-user-clock text-info"></i>
                              </div>
                              <div class="col-md-8">
                                <span>18/06/2018</span>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-8 offset-4">
                                <strong>
                                  <h3>17:44 </h3>
                                </strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-5">
                      <div class="card card-table">
                        <div class="card-header text-center">
                          <h5>Documentos Descargados</h5>
                        </div>
                        <div class="card-body text-center">
                          <div class="espera">
                            <div class="row">
                              <div class="col-md-4">
                                <i style="font-size: 30px;" class="fas fa-download text-success"></i>
                              </div>
                              <div class="col-md-8">
                                <span>N° de documentos descargas hoy</span>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-8 offset-4">
                                <strong>
                                  <h3>150</h3>
                                </strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-5 offset-1">
                      <div class="card card-table">
                        <div class="card-header text-center">
                          <h5>Documentos Consultados</h5>
                        </div>
                        <div class="card-body text-center">
                          <div class="espera">
                            <div class="row">
                              <div class="col-md-4">
                                <i style="font-size: 30px;" class="fas fa-eye text-success"></i>
                              </div>
                              <div class="col-md-8">
                                <span>N° de documentos consultados hoy</span>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-8 offset-4">
                                <strong>
                                  <h3>501</h3>
                                </strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-5">
                      <div class="card card-table">
                        <div class="card-header text-center">
                          <h5>Documentos Eliminados</h5>
                        </div>
                        <div class="card-body text-center">
                          <div class="espera">
                            <div class="row">
                              <div class="col-md-4">
                                <i style="font-size: 30px;" class="fas fa-trash text-danger"></i>
                              </div>
                              <div class="col-md-8">
                                <span>N° de documentos eliminados hoy</span>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-8 offset-4">
                                <strong>
                                  <h3>35</h3>
                                </strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </eui-tab-panel>
              </eui-tabs>
            </div>
          </div>
        </eui-tab-panel>
      </eui-tabs>
    </div>
  </div>
  <div class="card-footer">
  </div>
</div>



<!--Modal Agregar Usuario-->
<div class="modal fade" id="modalAgregarUsr" tabindex="-1" role="dialog" aria-labelledby="AgregarUsuario" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="nuevaEmpresa">Agregar Usuario</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <label>Nombre Usuario:
            <eui-textbox id="nombreu" [(ngModel)]="auxUsuario.NombreUsuario"></eui-textbox>
            <eui-addon>
              <i class="fa fa-user mr-1"></i>
            </eui-addon>
          </label>
        </div>

        <div class="row">
          <label>Password:
            <eui-textbox [(ngModel)]="auxUsuario.Password" ></eui-textbox>
            <eui-addon>
              <i class="fa fa-lock mr-1"></i>
            </eui-addon>
          </label>
        </div>

        <div class="row">
          <label>Rut Usuario:
            <eui-textbox [(ngModel)]="auxUsuario.RutUsuario" ></eui-textbox>
            <eui-addon>
              <i class="fa fa-lock mr-1"></i>
            </eui-addon>
          </label>
        </div>

        <div class="row">
          <label>Rut Empresa:
            <eui-textbox [(ngModel)]="auxUsuario.RutEmpresa" ></eui-textbox>
            <eui-addon>
              <i class="fa fa-lock mr-1"></i>
            </eui-addon>
          </label>
        </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-modal" (click)="AgregarUsuario()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Eliminar Usuario-->
<div class="modal fade" id="modalEliminarUsuario" tabindex="-1" role="dialog" aria-labelledby="eliminarUsuario" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Eliminar</h3>
      </div>
      <div class="modal-body">
        <label>¿Seguro que desea eliminar este Usuario?</label>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="eliminarUsuario(usuarioSeleccionado)">Aceptar</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Cambiar Contraseña-->
<div class="modal fade" id="modalCambiarPass" tabindex="-1" role="dialog" aria-labelledby="CambiarPass" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="nuevaEmpresa">Cambiar Contraseña</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <label>Nombre Usuario:
            <eui-textbox [value]="usuarioSeleccionado.nombreUsuario" disabled=”disabled”></eui-textbox>
            <eui-addon>
              <i class="fa fa-user mr-1"></i>
            </eui-addon>
          </label>
        </div>

        <div class="row">
          <label>Nueva Password:
            <eui-textbox [(ngModel)]="auxUsuario.Password" ></eui-textbox>
            <eui-addon>
              <i class="fa fa-user mr-1"></i>
            </eui-addon>
          </label>
        </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-modal" (click)="CambiarPass(usuarioSeleccionado)">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Editar Usuario-->
<div class="modal fade" id="modalEditarUsr" tabindex="-1" role="dialog" aria-labelledby="modalEditarUsr" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="nuevaEmpresa">Cambiar Contraseña</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="row">
              <label>Nombre Usuario:
                <eui-textbox [(ngModel)]="auxUsuario.NombreUsuario" [placeholder]="usuarioSeleccionado.nombreUsuario"></eui-textbox>
                <eui-addon>
                  <i class="fa fa-user mr-1"></i>
                </eui-addon>
              </label>
            </div>
    
            <div class="row">
              <label>Rut Usuario:
                <eui-textbox [(ngModel)]="auxUsuario.RutUsuario" [placeholder]="usuarioSeleccionado.rutUsuario"></eui-textbox>
                <eui-addon>
                  <i class="fa fa-lock mr-1"></i>
                </eui-addon>
              </label>
            </div>
    
            <div class="row">
              <label>Empresa:
                  <select #empresa (change)="CambiarComboEmpresa(empresa.value)" class="custom-select" id="inputEmpresa">
                      <option value="0" selected>Escoger...</option>
                      <option value="111.111.111">Claro</option>
                      <option value="222.222.222">Vtr</option>
                      <option value="333.333.333">Wom</option>
                      <option value="444.444.444">Metlife</option>
                      <option value="555.555.555">Jumbo</option>
                      <option value="66.666.666-6">Entel</option>
                      <option value="777.777.777">Lider</option>
                  </select>
                
              </label>
            </div>
            
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-modal" (click)="EditarUsuario(usuarioSeleccionado)">Guardar Cambios</button>
        </div>
      </div>
    </div>
  </div>